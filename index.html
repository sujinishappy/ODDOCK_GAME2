<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>10ì´ˆ ë§ì¶”ê¸° ê²Œì„</title>
<link rel="icon" type="image/x-icon" href="./logo.png">

<style>
    body {
        margin: 0;
        background: #111;
        width: 1920px;
        height: 1080px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: 'Pretendard', sans-serif;
    }

    .timer-wrap {
        display: flex;
        gap: 10px;
    }

    .digit {
        width: 160px;
        height: 240px;
        background: #222;
        border-radius: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 160px;
        font-weight: bold;
    }

    .dot {
        width: 80px;
        height: 240px;
        font-size: 160px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .msg {
        font-size: 32px;
        margin-top: 30px;
        height: 60px;
        color: #868686;
    }
    #title{
        font-size: 50px;
        margin-bottom: 50px;
    }
    button {
        margin-top: 100px;
        padding: 20px 50px;
        font-size: 40px;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        background: #ffffff22;
        color: white;
        transition: background 0.2s;
    }

    button:hover {
        background: #ffffff44;
    }
</style>
</head>
<body>

<h1 id="title">10ì´ˆì— ë©ˆì¶°ë¼!</h1>

<div class="timer-wrap">
    <div class="digit" id="d1">0</div>
    <div class="digit" id="d2">0</div>
    <div class="dot">.</div>
    <div class="digit" id="d3">0</div>
    <div class="digit" id="d4">0</div>
</div>

<div class="msg" id="msg">ENTER í‚¤ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”</div>

<button id="resetBtn">RESET</button>

<script>
    // --------------------------
    // ğŸ”Š BGM ì„¤ì •
    // --------------------------
    let bgm = new Audio('./sound/bgm.mp3');
    bgm.loop = true;
    bgm.volume = 0.5;

    let isRunning = false;
    let startTime = 0;
    let timerInterval = null;

    const d1 = document.getElementById("d1");
    const d2 = document.getElementById("d2");
    const d3 = document.getElementById("d3");
    const d4 = document.getElementById("d4");

    const msgEl = document.getElementById("msg");
    const resetBtn = document.getElementById("resetBtn");

    // ê° ìë¦¬ ìˆ«ì ì—…ë°ì´íŠ¸
    function updateDigits(t) {
        let str = t.toFixed(2).padStart(5, "0"); 
        d1.textContent = str[0];
        d2.textContent = str[1];
        d3.textContent = str[3];
        d4.textContent = str[4];
    }

    // ìŠ¤í†±ì›Œì¹˜ ì—…ë°ì´íŠ¸
    function updateTimer() {
        const now = performance.now();
        const diff = (now - startTime) / 1000;
        updateDigits(diff);
    }

    // --------------------------
    // âŒ¨ ENTERë¡œ ì‹œì‘/ì •ì§€
    // --------------------------
    document.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            if (!isRunning) {
                // ì‹œì‘
                isRunning = true;

                // ğŸ”Š BGM ì¬ìƒ
                bgm.currentTime = 0;
                bgm.play().catch(() => {});

                msgEl.textContent = "ë©ˆì¶”ë ¤ë©´ ENTER ëˆ„ë¥´ê¸°";
                startTime = performance.now();
                timerInterval = setInterval(updateTimer, 10);

            } else {
                // ë©ˆì¶¤
                isRunning = false;
                clearInterval(timerInterval);

                // ğŸ”Š BGM ì •ì§€
                bgm.pause();

                const now = performance.now();
                const final = (now - startTime) / 1000;
                const diff = Math.abs(final - 10);

                if (diff < 0.05) {
                    msgEl.textContent = `ğŸ‰ ì„±ê³µ! (${final.toFixed(2)}ì´ˆ)`;
                } else {
                    msgEl.textContent = `ğŸ˜… ì‹¤íŒ¨â€¦ (${final.toFixed(2)}ì´ˆ)`;
                }
            }
        }
    });

    // --------------------------
    // ğŸ”„ RESET ë²„íŠ¼
    // --------------------------
    resetBtn.addEventListener("click", () => {
        clearInterval(timerInterval);
        isRunning = false;

        // ğŸ”Š BGM ì´ˆê¸°í™”
        bgm.pause();
        bgm.currentTime = 0;

        updateDigits(0);
        msgEl.textContent = "ENTER í‚¤ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”";
    });

    updateDigits(0);
</script>

</body>
</html>
